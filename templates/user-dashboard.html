<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    {% include "_navbar.html" %}


    <h1>Dashboard</h1>
    <div id = 'header'>
    <h2>Hi User!</h2>
    <h2>Redmond, WA</h2>
    </div>
    <div id = 'content'>
    <div id = 'details'>
        <p id = 'description'>Community Resources are important and this website does things and introduces reousrces and shows events and this description is filler for design but also basically just tells the user about the app and the layout that they are seeing on their screen at both this very moment and on other pages so yeah i think that is very important and good</p>
        <div id ='org-recs'>
            <h2>Top resources for you!</h2>
            <div id = 'orgs'>
            <div class = 'org'>
                <h2>Org Name</h2>
                <p>small description</p>
            </div>
            <div class = 'org'>
                <h2>Org Name</h2>
                <p>small description</p>
            </div>
            <div class = 'org'>
                <h2>Org Name</h2>
                <p>small description</p>
            </div>
            <div class = 'org'>
                <h2>Org Name</h2>
                <p>small description</p>
            </div>
            <div class = 'org'>
                <h2>Org Name</h2>
                <p>small description</p>
            </div>
        </div> 
        </div>
    </div>
    <div id = 'event-highlights'>
        <h2>Upcoming Events for You</h2>
        <div class = 'event-card'>
            <h3>Event Name</h3>
            <p><strong>Org Name</strong></p>
            <p>Event Description</p>
            <div class = 'tags'>
                <p>Tag 1</p>
                <p>Tag 2</p>
            </div>
        </div> 
        <div class = 'event-card'>
            <h3>Event Name</h3>
            <p><strong>Org Name</strong></p>
            <p>Event Description</p>
            <div class = 'tags'>
                <p>Tag 1</p>
                <p>Tag 2</p>
            </div>
        </div> 
        <div class = 'event-card'>
            <h3>Event Name</h3>
            <p><strong>Org Name</strong></p>
            <p>Event Description</p>
            <div class = 'tags'>
                <p>Tag 1</p>
                <p>Tag 2</p>
            </div>
        </div> 
    </div>
</div>
  <script src="{{ url_for('static', filename='js/sitewide.js') }}"></script>
</body>
<script type = 'module'>
     import { auth } from "{{ url_for('static', filename='auth.js') }}";
     import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
    document.addEventListener("DOMContentLoaded", () => {
       onAuthStateChanged(auth, (user) => {
      if (!user) {
        console.log("No user found â€” redirecting to register");
        window.location.href = "{{ url_for('register') }}";
      } else {
        console.log("Logged in as:", user.email);
        document.querySelector('#header h2').textContent = `Hi ${user.name}!`;
      }
    });
    });
    document.addEventListener("click", (e) => {
    if (e.target.closest("a[href='{{ url_for('landing') }}']")) {
      e.preventDefault();
      signOut(auth)
        .then(() => {
          console.log("User signed out");
          window.location.href = "{{ url_for('landing') }}";
        })
        .catch((error) => {
          console.error("Logout error:", error);
        });
    }
  });
</script>
</html>
