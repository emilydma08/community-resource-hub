<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include "_navbar.html" %}

    <div id = 'header' class="pt-16 px-14 max-w-screen overflow-x-hidden mx-auto">
        <div class="flex flex-row items-center justify-between mt-8 pb-4">
            <h2 class="heading-font text-3xl">Hi User!</h2>
            <div class="flex flex-row items-center gap-2">
                <img src="{{ url_for('static', filename='images/location.png') }}" alt="location icon" class="w-10 h-auto">
                <h2 class="heading-font text-2xl">Redmond, WA</h2>
            </div>
        </div>
        <div class="flex flex-row justify-between gap-6">
            <div class="w-1/2 pr-8 flex flex-col gap-6">
                <p class="body-font font-sm font-light">Community Resources are important and this website does things and introduces reousrces and shows events and this description is filler for design but also basically just tells the user about the app and the layout that they are seeing on their screen</p>
                <div class="bg-[var(--beige)] h-[79vh] p-6 rounded-xl flex flex-col gap-4">
                    <h2 class="heading-font text-xl font-semibold">Resources For You</h2>
                    <div class="flex flex-row overflow-x-auto gap-6">
                        <div class="flex flex-none flex-col h-[65vh] bg-white rounded-2xl w-[45%] rounded-lg">
                            <img src="{{ url_for('static', filename='images/perrigo.jpg') }}" class="object-cover rounded-t-2xl w-full h-[60%] mb-3">
                            <div class="flex flex-col px-4">
                                <div class="flex flex-row items-center gap-4 mb-2"><h2 class="heading-font font-base">Perrigo Park</h2><span class="text-sm text-green-600">Open Now</span></div>
                                <p class="body-font font-sm font-light">A well-maintained public park with soccer fields, volleyball and tennis courts, and playgrounds</p>
                                <div class="mt-3 flex flex-row gap-2">
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-none flex-col h-[65vh] bg-white rounded-2xl w-[45%] rounded-lg">
                            <img src="{{ url_for('static', filename='images/perrigo.jpg') }}" class="object-cover rounded-t-2xl w-full h-[60%] mb-3">
                            <div class="flex flex-col px-4">
                                <div class="flex flex-row items-center gap-4 mb-2"><h2 class="heading-font font-base">Perrigo Park</h2><span class="text-sm text-green-600">Open Now</span></div>
                                <p class="body-font font-sm font-light">A well-maintained public park with soccer fields, volleyball and tennis courts, and playgrounds</p>
                                <div class="mt-3 flex flex-row gap-2">
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-none flex-col h-[65vh] bg-white rounded-2xl w-[45%] rounded-lg">
                            <img src="{{ url_for('static', filename='images/perrigo.jpg') }}" class="object-cover rounded-t-2xl w-full h-[60%] mb-3">
                            <div class="flex flex-col px-4">
                                <div class="flex flex-row items-center gap-4 mb-2"><h2 class="heading-font font-base">Perrigo Park</h2><span class="text-sm text-green-600">Open Now</span></div>
                                <p class="body-font font-sm font-light">A well-maintained public park with soccer fields, volleyball and tennis courts, and playgrounds</p>
                                <div class="mt-3 flex flex-row gap-2">
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-none flex-col h-[65vh] bg-white rounded-2xl w-[45%] rounded-lg">
                            <img src="{{ url_for('static', filename='images/perrigo.jpg') }}" class="object-cover rounded-t-2xl w-full h-[60%] mb-3">
                            <div class="flex flex-col px-4">
                                <div class="flex flex-row items-center gap-4 mb-2"><h2 class="heading-font font-base">Perrigo Park</h2><span class="text-sm text-green-600">Open Now</span></div>
                                <p class="body-font font-sm font-light">A well-maintained public park with soccer fields, volleyball and tennis courts, and playgrounds</p>
                                <div class="mt-3 flex flex-row gap-2">
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-none flex-col h-[65vh] bg-white rounded-2xl w-[45%] rounded-lg">
                            <img src="{{ url_for('static', filename='images/perrigo.jpg') }}" class="object-cover rounded-t-2xl w-full h-[60%] mb-3">
                            <div class="flex flex-col px-4">
                                <div class="flex flex-row items-center gap-4 mb-2"><h2 class="heading-font font-base">Perrigo Park</h2><span class="text-sm text-green-600">Open Now</span></div>
                                <p class="body-font font-sm font-light">A well-maintained public park with soccer fields, volleyball and tennis courts, and playgrounds</p>
                                <div class="mt-3 flex flex-row gap-2">
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                    <div class="bg-gray-200 text-gray-800 text-xs px-2 py-1 rounded-full flex flex-row items-center gap-2">
                                        <img src="{{ url_for('static', filename='images/tag.png') }}" alt="Tag Icon" class=" w-auto h-3">
                                        park
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
            <div class="w-1/2 bg-[var(--beige)] rounded-xl p-6 pb-2 flex flex-col">
                <h2 class="heading-font text-xl font-semibold mb-4">Upcoming Events</h2>
                <div class='bg-[var(--white)] p-5 rounded-2xl w-full flex flex-col gap-2 mb-6'>
                    <h3 class="heading-font text-lg font-normal">Free Meal Distribution - <span>Eastside Food Not Bombs</span></h3>
                    <div class="flex flex-row">
                        <div class="flex flex-row">
                            <img src="{{ url_for('static', filename='images/location.png') }}" alt="location icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Redmond Transit Center</span>
                        </div>
                        <div class="flex flex-row ml-6">
                            <img src="{{ url_for('static', filename='images/calendar.png') }}" alt="calendar icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Every Tuesday, 5 PM - 7 PM</span>
                        </div>
                    </div>
                    <p class="body-font font-light text-sm">A volunteer group gathering and distributing free meals every Tuesday in Redmond (near the transit center) as part of a community‑solidarity and service effort</p>
                    <div class="flex flex-row justify-around align-center">
                        <div class="bg-[var(--green)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Register</div>
                        <div class="bg-[var(--blue)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Learn More</div>
                    </div>
                </div> 
                <div class='bg-[var(--white)] p-5 rounded-2xl w-full flex flex-col gap-2 mb-6'>
                    <h3 class="heading-font text-lg font-normal">Free Meal Distribution - <span>Eastside Food Not Bombs</span></h3>
                    <div class="flex flex-row">
                        <div class="flex flex-row">
                            <img src="{{ url_for('static', filename='images/location.png') }}" alt="location icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Redmond Transit Center</span>
                        </div>
                        <div class="flex flex-row ml-6">
                            <img src="{{ url_for('static', filename='images/calendar.png') }}" alt="calendar icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Every Tuesday, 5 PM - 7 PM</span>
                        </div>
                    </div>
                    <p class="body-font font-light text-sm">A volunteer group gathering and distributing free meals every Tuesday in Redmond (near the transit center) as part of a community‑solidarity and service effort</p>
                    <div class="flex flex-row justify-around align-center">
                        <div class="bg-[var(--green)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Register</div>
                        <div class="bg-[var(--blue)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Learn More</div>
                    </div>
                </div>
                <div class='bg-[var(--white)] p-5 rounded-2xl w-full flex flex-col gap-2 mb-6'>
                    <h3 class="heading-font text-lg font-normal">Free Meal Distribution - <span>Eastside Food Not Bombs</span></h3>
                    <div class="flex flex-row">
                        <div class="flex flex-row">
                            <img src="{{ url_for('static', filename='images/location.png') }}" alt="location icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Redmond Transit Center</span>
                        </div>
                        <div class="flex flex-row ml-6">
                            <img src="{{ url_for('static', filename='images/calendar.png') }}" alt="calendar icon" class="w-5 h-auto">
                            <span class="body-font font-light text-sm ml-2">Every Tuesday, 5 PM - 7 PM</span>
                        </div>
                    </div>
                    <p class="body-font font-light text-sm">A volunteer group gathering and distributing free meals every Tuesday in Redmond (near the transit center) as part of a community‑solidarity and service effort</p>
                    <div class="flex flex-row justify-around align-center">
                        <div class="bg-[var(--green)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Register</div>
                        <div class="bg-[var(--blue)] w-[45%] py-2 body-font text-sm font-normal text-white flex align-center justify-center rounded-xl">Learn More</div>
                    </div>
                </div>
            </div>
    </div>
    </div>
  <script src="{{ url_for('static', filename='js/sitewide.js') }}"></script>
</body>
<script type = 'module'>
     import { auth } from "{{ url_for('static', filename='auth.js') }}";
     import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
    document.addEventListener("DOMContentLoaded", () => {
       onAuthStateChanged(auth, (user) => {
      if (!user) {
        console.log("No user found — redirecting to register");
        window.location.href = "{{ url_for('register') }}";
      } else {
        console.log("Logged in as:", user.email);
        document.querySelector('#header h2').textContent = `Hi ${user.displayName || 'User'}!`;
      }
    });
    });
    document.addEventListener("click", (e) => {
    if (e.target.closest("a[href='{{ url_for('landing') }}']")) {
      e.preventDefault();
      signOut(auth)
        .then(() => {
          console.log("User signed out");
          window.location.href = "{{ url_for('landing') }}";
        })
        .catch((error) => {
          console.error("Logout error:", error);
        });
    }
  });
</script>
</html>
